'use strict';

var fs = require('fs');
var hooks = require('./hooks.json');
var findHooksDir = require('./utils/find-hooks-dir');
var isHusky = require('./utils/is-husky');

function removeHook(dir, name) {
  var filename = dir + '/' + name;

  if (fs.existsSync(filename) && isHusky(filename)) {
    fs.unlinkSync(dir + '/' + name);
  }
}

function uninstallFrom(huskyDir) {
  try {
    var hooksDir = findHooksDir(huskyDir);

    hooks.forEach(function (hookName) {
      removeHook(hooksDir, hookName);
    });
    console.log('done\n');
  } catch (e) {
    console.error(e);
  }
}

module.exports = uninstallFrom;