#!/usr/bin/env node

'use strict';

var meow = require('meow');
var fn = require('cpy');

var cli = meow('\n\tUsage\n\t  $ cpy <source>... <destination>\n\n\tOptions\n\t  --no-overwrite       Don\'t overwrite the destination\n\t  --parents            Preserve path structure\n\t  --cwd=<dir>          Working directory for files\n\t  --rename=<filename>  Rename all <source> filenames to <filename>\n\n\t<source> can contain globs if quoted\n\n\tExamples\n\t  Copy all .png files in src folder into dist except src/goat.png\n\t  $ cpy \'src/*.png\' \'!src/goat.png\' dist\n\n\t  Copy all .html files inside src folder into dist and preserve path structure\n\t  $ cpy \'**/*.html\' \'../dist/\' --cwd=src --parents\n', {
	string: ['_']
});

fn(cli.input, cli.input.pop(), {
	cwd: cli.flags.cwd || process.cwd(),
	rename: cli.flags.rename,
	parents: cli.flags.parents,
	overwrite: cli.flags.overwrite !== false,
	nonull: true
}).catch(function (err) {
	if (err.name === 'CpyError') {
		console.error(err.message);
		process.exit(1);
	} else {
		throw err;
	}
});