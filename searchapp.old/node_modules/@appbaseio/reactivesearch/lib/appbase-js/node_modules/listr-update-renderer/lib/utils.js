'use strict';

var chalk = require('chalk');
var logSymbols = require('log-symbols');
var figures = require('figures');
var elegantSpinner = require('elegant-spinner');

var pointer = chalk.yellow(figures.pointer);
var skipped = chalk.yellow(figures.arrowDown);

exports.isDefined = function (x) {
	return x !== null && x !== undefined;
};

exports.getSymbol = function (task, options) {
	if (!task.spinner) {
		task.spinner = elegantSpinner();
	}

	if (task.isPending()) {
		return options.showSubtasks !== false && task.subtasks.length > 0 ? pointer : chalk.yellow(task.spinner());
	}

	if (task.isCompleted()) {
		return logSymbols.success;
	}

	if (task.hasFailed()) {
		return task.subtasks.length > 0 ? pointer : logSymbols.error;
	}

	if (task.isSkipped()) {
		return skipped;
	}

	return ' ';
};