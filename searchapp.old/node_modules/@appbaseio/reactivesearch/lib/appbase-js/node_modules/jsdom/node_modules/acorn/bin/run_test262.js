"use strict";

var fs = require("fs");
var path = require("path");
var run = require("test262-parser-runner");
var parse = require("..").parse;

var unsupportedFeatures = ["BigInt", "class-fields", "class-fields-private", "class-fields-public", "numeric-separator-literal"];

run(function (content, _ref) {
  var sourceType = _ref.sourceType;
  return parse(content, { sourceType: sourceType, ecmaVersion: 10 });
}, {
  testsDirectory: path.dirname(require.resolve("test262/package.json")),
  skip: function skip(test) {
    return test.attrs.features && unsupportedFeatures.some(function (f) {
      return test.attrs.features.includes(f);
    });
  },
  whitelist: fs.readFileSync("./bin/test262.whitelist", "utf8").split("\n").filter(function (v) {
    return v;
  })
});